@page
@model LuuTrieuViRazorPage.Pages.Room.IndexModel
@{
    ViewData["Title"] = "Room";
}

<link rel="stylesheet" href="~/css/booking.css" asp-append-version="true" />

<div class="container my-5">
    <h1 class="text-center mb-4">List of rooms</h1>
    <div class="row mb-3">
        <div class="col-md-6 form-group">
            <label for="startDate" class="form-label fw-bold">Start Date:</label>
            <input type="date" class="form-control" id="startDate" name="startDate" value="@DateTime.Today.ToString("yyyy-MM-dd")" min="@DateTime.Today.ToString("yyyy-MM-dd")">
        </div>

        <div class="col-md-6 form-group">
            <label for="endDate" class="form-label fw-bold">End Date:</label>
            <input type="date" class="form-control" id="endDate" name="endDate" value="@DateTime.Today.ToString("yyyy-MM-dd")" min="@DateTime.Today.ToString("yyyy-MM-dd")">
        </div>
    </div>

    <div class="row row-cols-1 row-cols-md-3 g-4 mb-5 justify-content-center" id="container-room">
        @if(Model.Rooms.Any())
        {
            @foreach (var room in Model.Rooms)
            {
                <div class="col">
                    <div class="card h-100">
                        <div class="card-body d-flex flex-column justify-content-between">
                            <div class="mb-3">
                                <h5 class="card-title text-center" id="room-number-@room.RoomId">@room.RoomNumber</h5>
                                <p class="card-text">@room.RoomDetailDescription</p>
                            </div>
                            <div class="d-flex justify-content-between align-items-end">
                                <p class="card-text mb-0"><span class="fw-bold">Price:</span> $<span id="room-price-@room.RoomId">@Math.Truncate((decimal)room.RoomPricePerDay!) </span>/ day</p>
                                <div>
                                    <button id="@room.RoomId" class="btn btn-outline-dark me-2 add">Book</button>

                                    <a asp-page="/Room/Detail" asp-route-id="@room.RoomId" class="btn btn-outline-secondary">View Detail</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            }
        } else
        {
            <h4 class="text-center">No Item Available!</h4>
        }

    </div>
    <div id="detail" class="mb-3  text-center">
        <h3>Details</h3>
        <div class="detail-item mb-3">
            <p class="text-xxl-center">Booking something!</p>
        </div>
        <h5 class="card-text">Total Price: <span id="total-price" class="fw-bold"></span></h5>
    </div>
    @Html.AntiForgeryToken()
    <div class="row align-items-center justify-content-center">
        <div class="col-md-6 text-center">
            <input id="customerId" type="text" value="@Model.Customer!.CustomerId" hidden/>
            <button id="confirm" class="btn btn-outline-dark" disabled>Confirm Booking</button>
        </div>
    </div>

</div>

<script src="~/js/signalr/dist/browser/signalr.js"></script>
